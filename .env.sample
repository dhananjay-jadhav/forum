# ===========================================
# Application Configuration
# ===========================================
NODE_ENV=development
PORT=3000
APP_NAME=postgraphile-api
LOG_LEVEL=debug

# ===========================================
# Database Configuration
# ===========================================
DATABASE_URL=postgres://postgres:password@localhost:5432/forum
DATABASE_SCHEMAS=app_public

# Shadow database for graphile-migrate (used to verify migrations)
DATABASE_SHADOW_URL=postgres://postgres:password@localhost:5432/forum_shadow

# Connection Pool Settings
DATABASE_POOL_MAX=20
DATABASE_POOL_MIN=2
DATABASE_IDLE_TIMEOUT=30000
DATABASE_CONNECTION_TIMEOUT=5000
DATABASE_STATEMENT_TIMEOUT=30000
DATABASE_QUERY_TIMEOUT=30000

# SSL (enable in production)
DATABASE_SSL=false
DATABASE_SSL_REJECT_UNAUTHORIZED=true

# ===========================================
# Security
# ===========================================
JWT_SECRET=your-secret-key-change-in-production

# ===========================================
# Rate Limiting
# ===========================================
RATE_LIMIT_MAX=5000
RATE_LIMIT_WINDOW_MS=60000

# ===========================================
# GraphQL Security
# ===========================================
GRAPHQL_DEPTH_LIMIT=10
GRAPHQL_COST_LIMIT=1000

# ===========================================
# Server Timeouts
# ===========================================
SHUTDOWN_TIMEOUT=10000
KEEP_ALIVE_TIMEOUT=65000

# ===========================================
# Email Configuration
# ===========================================
# SMTP settings for production (leave empty for mock in development)
SMTP_HOST=
SMTP_PORT=587
SMTP_USER=
SMTP_PASS=
SMTP_FROM=noreply@example.com

# App URL for email links
APP_URL=http://localhost:3000

# ===========================================
# Moderation Configuration
# ===========================================
# Enable/disable automatic content moderation
MODERATION_ENABLED=true
# Maximum spam score before content is flagged (0-100)
MODERATION_SPAM_THRESHOLD=70

# ===========================================
# Cleanup Configuration
# ===========================================
# Hours before unverified emails are deleted
CLEANUP_UNVERIFIED_EMAIL_HOURS=48
# Hours before password reset tokens expire
CLEANUP_RESET_TOKEN_HOURS=24
# Days before completed jobs are deleted
CLEANUP_COMPLETED_JOB_DAYS=7
# Days before failed jobs are deleted
CLEANUP_FAILED_JOB_DAYS=30

# ===========================================
# Kafka Configuration
# ===========================================
# Kafka broker addresses (comma-separated for multiple brokers)
KAFKA_BROKERS=localhost:9092
# Client ID for Kafka connection
KAFKA_CLIENT_ID=forum-api
# Consumer group ID
KAFKA_GROUP_ID=forum-group
# Enable/disable Kafka integration
KAFKA_ENABLED=true
# Connection timeout in ms
KAFKA_CONNECTION_TIMEOUT=10000
# Request timeout in ms
KAFKA_REQUEST_TIMEOUT=30000
# Enable SSL for Kafka
KAFKA_SSL=false
# SASL authentication (optional)
# KAFKA_SASL_USERNAME=
# KAFKA_SASL_PASSWORD=
# KAFKA_SASL_MECHANISM=plain

# ===========================================
# Analytics API Configuration
# ===========================================
ANALYTICS_PORT=3002
# Metrics retention in days
METRICS_RETENTION_DAYS=90

# ===========================================
# Search API Configuration
# ===========================================
SEARCH_PORT=3003
# Elasticsearch node URL
ELASTICSEARCH_URL=http://localhost:9200
# Index prefix for forum data
ES_INDEX_PREFIX=forum

# ===========================================
# Debugging
# ===========================================
# Set to true to log all SQL queries (useful for development)
SHOW_SQL_QUERIES=false

# ===========================================
# Performance Testing (optional)
# ===========================================
API_URL=http://localhost:3000
DURATION=10
CONNECTIONS=10
PIPELINING=1
HOST=localhost
